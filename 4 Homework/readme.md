Ссылка на miro: https://miro.com/app/board/uXjVNDrpRLY=/?share_link_id=288564985740

Проблемы:
1. Сервис расчета и списания средств написан вместе, но при этом к ним предъявляются разные требования по обновлениям.
2. Энтети серивс воркеров, который синхронно общается с остальными сервисами, это вызывает серьезные проблемы по производительности и создает сильную связность.
3. Интелектуальный матчинг пользователей находится вместе с планированием визитов и контролем качества работы.
4. Сборка необходимых расходников для заказа не обязательно выделять в отдельный сервис, его можно объеденить с основныым сервисом.


### Решения:
1. Выделить отдельный сервис для списания средств у клиентов, чтобы у него можно было отдельно реализовывать требования по его изменчивости в связи с тем, что в него постоянно будут добавляться новые способы оплаты и так же, у них будет несколько разный язык, так как инвойс для оплаты != инвойс для пополнения.
2. Конекст планирование визита можно разделить на два контекста - один отвечает за воркеров и исполнение ими заказов, а второй отвечает за создание услуги. И энтети сервис воркеров поглатиться первых из этих двух контекстов и возьмет функциональность содержания воркеров на себя.
3. Интеллектуальный матчинг стоит вынести в отдельный сервис, так как он является core поддоменом и должен отвечать определенным характеристикам, так же из дополнительных требования ясно, что его стоит выполнить по паттерну pipeline, в отличии от остального продукта и к тому же у него своя специфический язык терминов. Поэтому его точно стоит выделить в отдельный сервис и контекст.
4. Сборку заказов можно внести в поддомен Выполнение заказов


#### План работы:
**Нет ресурсов, есть опыт и/или инфраструктура:**
В таком случае лучше начать с чего-то нового, чтобы немного набрать опыта и в целом двигаться от простого и наименее критического к сложному, проще всего тут будет первым делом выделить сервис оплаты для клиентов в отдельный сервис. Затем можно внести сборку заказов в поддомен выполнения заказов. Вынести функциональность матчинга в отдельный новый сервис. А после этого, в последнюю очередь разделить контекст планирвоание визита на два контекста и поглотить логику энтети сервиса воркеров.
Порядок пунктов будет
1 -> 4 -> 3 -> 2

**Нет опыта и/или инфраструктуры, есть ресурсы:**
В таком случае важно начинать с наиболее критических по требованиям пунктов. В данном случае - это будет сервис матчинга, так как он основная ценность системы, затем избавиться от энтети сервиса, который усложняет систему лишними связями. Затем заняться выносом сервиса оплаты, а в последнюю очередь сервис сборки заказов внести в поддомен заказов.
Порядок пунктов тут будет:
3 -> 2 -> 1 -> 4